<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>DecentralizedOracle - Bodhi Prediction Market Wiki</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="../../css/custom.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "DecentralizedOracle";
    var mkdocs_page_input_path = "bodhi_core/decentralized_oracle.md";
    var mkdocs_page_url = "/bodhi_core/decentralized_oracle/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Bodhi Prediction Market Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Bodhi Token</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../bodhi_token/info/">Info</a>
                </li>
                <li class="">
                    
    <a class="" href="../../bodhi_token/qbao/">QBao (Mobile)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../bodhi_token/qtum_wallet_mobile/">Qtum Wallet (Mobile)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../bodhi_token/qt_wallet_desktop/">QT Wallet (Desktop)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../bodhi_token/qtum_cli/">Qtum-cli (Desktop)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Bodhi Core</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../event_factory/">EventFactory</a>
                </li>
                <li class="">
                    
    <a class="" href="../topic_event/">TopicEvent</a>
                </li>
                <li class="">
                    
    <a class="" href="../oracle_factory/">OracleFactory</a>
                </li>
                <li class="">
                    
    <a class="" href="../centralized_oracle/">CentralizedOracle</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">DecentralizedOracle</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#interface-abi">Interface (ABI)</a></li>
    

    <li class="toctree-l3"><a href="#function-signatures">Function Signatures</a></li>
    

    <li class="toctree-l3"><a href="#event-hashes">Event Hashes</a></li>
    

    <li class="toctree-l3"><a href="#voteresult">voteResult()</a></li>
    

    <li class="toctree-l3"><a href="#finalizeresult">finalizeResult()</a></li>
    

    <li class="toctree-l3"><a href="#eventaddress">eventAddress()</a></li>
    

    <li class="toctree-l3"><a href="#numofresults">numOfResults()</a></li>
    

    <li class="toctree-l3"><a href="#consensusthreshold">consensusThreshold()</a></li>
    

    <li class="toctree-l3"><a href="#lastresultindex">lastResultIndex()</a></li>
    

    <li class="toctree-l3"><a href="#arbitrationendblock">arbitrationEndBlock()</a></li>
    

    <li class="toctree-l3"><a href="#getvotebalances">getVoteBalances()</a></li>
    

    <li class="toctree-l3"><a href="#gettotalvotes">getTotalVotes()</a></li>
    

    <li class="toctree-l3"><a href="#resultindex">resultIndex()</a></li>
    

    <li class="toctree-l3"><a href="#finished">finished()</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../logs/">Logs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Qtum</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../qtum/mainnet_v0/">Mainnet v0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../qtum/testnet_v0/">Testnet v0</a>
                </li>
                <li class="">
                    
    <a class="" href="../../qtum/qt_wallet/">QT Wallet (Desktop)</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../deployment/">Contract Deployment</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../developer_guide/">Developer Guide</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../help/">Help</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Bodhi Prediction Market Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Bodhi Core &raquo;</li>
        
      
    
    <li>DecentralizedOracle</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="interface-abi">Interface (ABI)</h1>
<p><textarea id="decentralized_oracle_abi" class="abi" readonly rows="2">
[{"constant":true,"inputs":[],"name":"resultIndex","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"arbitrationEndBlock","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"lastResultIndex","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"name":"","type":"uint16"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"finalizeResult","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getBetBalances","outputs":[{"name":"","type":"uint256[11]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getVoteBalances","outputs":[{"name":"","type":"uint256[11]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalVotes","outputs":[{"name":"","type":"uint256[11]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_eventResultIndex","type":"uint8"},{"name":"_botAmount","type":"uint256"}],"name":"voteResult","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getTotalBets","outputs":[{"name":"","type":"uint256[11]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"INVALID_RESULT_INDEX","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"finished","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"numOfResults","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"consensusThreshold","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"eventAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_version","type":"uint16"},{"name":"_owner","type":"address"},{"name":"_eventAddress","type":"address"},{"name":"_numOfResults","type":"uint8"},{"name":"_lastResultIndex","type":"uint8"},{"name":"_arbitrationEndBlock","type":"uint256"},{"name":"_consensusThreshold","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_version","type":"uint16"},{"indexed":true,"name":"_oracleAddress","type":"address"},{"indexed":true,"name":"_participant","type":"address"},{"indexed":false,"name":"_resultIndex","type":"uint8"},{"indexed":false,"name":"_votedAmount","type":"uint256"}],"name":"OracleResultVoted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_version","type":"uint16"},{"indexed":true,"name":"_oracleAddress","type":"address"},{"indexed":false,"name":"_resultIndex","type":"uint8"}],"name":"OracleResultSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_previousOwner","type":"address"},{"indexed":true,"name":"_newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"}]
</textarea>
<button class="btn" data-clipboard-target="#decentralized_oracle_abi">Copy ABI</button>
<span class="copied">Copied!</span></p>
<h1 id="function-signatures">Function Signatures</h1>
<pre><code>bb235d67: INVALID_RESULT_INDEX()
4f2c07f5: arbitrationEndBlock()
f9b0b5b9: consensusThreshold()
fad56779: eventAddress()
61cac418: finalizeResult()
bef4876b: finished()
871169b9: getBetBalances()
a3cb679d: getTotalBets()
9a0e7d66: getTotalVotes()
95d3382a: getVoteBalances()
54750783: lastResultIndex()
ca381d2e: numOfResults()
8da5cb5b: owner()
0d4e8aed: resultIndex()
f2fde38b: transferOwnership(address)
54fd4d50: version()
a34ce8b9: voteResult(uint8,uint256)
</code></pre>
<h1 id="event-hashes">Event Hashes</h1>
<pre><code>event OracleResultVoted(uint16 indexed _version, address indexed _oracleAddress, address indexed _participant, uint8 _resultIndex, uint256 _votedAmount)
999983c5b5c285890ab4b2b91f9a82d0ca95784c9b138bd37110ba06faa45f67

event OracleResultSet(uint16 indexed _version, address indexed _oracleAddress, uint8 _resultIndex)
766d7bf9e9e8671204cd1da1b1b107d50247d2d1c389c552765262ee3afefb9b
</code></pre>
<h1 id="voteresult">voteResult()</h1>
<p>Places a vote with BOT on a result given the index. The BOT is routed to the TopicEvent contract for storage.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li><a href="../../bodhi_token/qt_wallet_desktop/#approve-bot">approve()</a> the amount of BOT you want to vote with. The <code>_spender</code> should be the <code>TopicEvent</code> address.</li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>SendTo</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>
<p>Set the <code>Function</code> to <code>voteResult(a34ce8b9)</code></p>
<p><img alt="" src="../../img/vote_result1.png" /></p>
</li>
<li>
<p>Set the Result Index you would like to vote in <code>uint8 _eventResultIndex</code> field. Note this cannot be the equal to the last result index, or your transaction will fail.</p>
<p><img alt="" src="../../img/vote_result2.png" /></p>
</li>
<li>
<p>Set the amount of BOT to vote in the <code>uint256 _botAmount</code> field. Note that you have to <code>approve()</code> this amount to the <code>TopicEvent</code> contract address from the BodhiToken contract first.</p>
<p><img alt="" src="../../img/vote_result3.png" /></p>
</li>
<li>
<p>If this vote will reach the consensus threshold, set the <code>Gas Limit</code> to <code>3000000</code> (3 million) to make sure the transaction goes through. If under the threshold, leave it as the default gas limit. Any unused gas will be returned to you. The vote that reaches the consensus threshold will need high gas to create a new DecentralizedOracle contract.</p>
<p><img alt="" src="../../img/vote_result4.png" /></p>
</li>
<li>
<p>Set the <code>Sender Address</code> as the address you want to vote from</p>
<p><img alt="" src="../../img/vote_result5.png" /></p>
</li>
<li>
<p>Click <code>Send To Contract</code> button</p>
</li>
<li>
<p>You should see your new transaction posted. Save the transaction id if you want to verify the transaction succeeded.</p>
<p><img alt="" src="../../img/vote_result6.png" /></p>
</li>
<li>
<p>Wait for the transaction to be mined</p>
</li>
</ol>
<h1 id="finalizeresult">finalizeResult()</h1>
<p>If the arbitration end block is reached, the last result index is a valid result, and the consensus threshold has not been surpassed, anyone may call this method to set the final result in the <a href="../topic_event/">TopicEvent</a>. This allows winners to withdraw from the <a href="../topic_event/">TopicEvent</a>.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>SendTo</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>
<p>Set the <code>Function</code> to <code>finalizeResult(61cac418)</code></p>
<p><img alt="" src="../../img/finalize_result1.png" /></p>
</li>
<li>
<p>Click <code>Send To Contract</code> button</p>
</li>
<li>Wait for the transaction to be mined</li>
</ol>
<h1 id="eventaddress">eventAddress()</h1>
<p>Returns the Event address.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>eventAddress(fad56779)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>address</code> is the Event address</li>
</ul>
</li>
</ol>
<h1 id="numofresults">numOfResults()</h1>
<p>Returns the number of Event results.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>numOfResults(ca381d2e)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint8</code> is the number of Event results</li>
</ul>
</li>
</ol>
<h1 id="consensusthreshold">consensusThreshold()</h1>
<p>Returns the consensus threshold that needs to be reached in order for the Oracle to be valid.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>consensusThreshold(f9b0b5b9)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint256</code> is the consensus threshold</li>
</ul>
</li>
</ol>
<h1 id="lastresultindex">lastResultIndex()</h1>
<p>Returns the last index of the previous oracle.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>lastResultIndex(54750783)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint8</code> is the last result index</li>
</ul>
</li>
</ol>
<h1 id="arbitrationendblock">arbitrationEndBlock()</h1>
<p>Returns the block when the voting period will end. </p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>arbitrationEndBlock(4f2c07f5)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint256</code> is the arbitration end block</li>
</ul>
</li>
</ol>
<h1 id="getvotebalances">getVoteBalances()</h1>
<p>Returns an array of BOT vote balances placed by the sender. Shows 10 values and each index is the vote amount for that result index.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>getVoteBalances(95d3382a)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint256[10]</code> is the array of BOT vote balances shown in Botoshi</li>
</ul>
</li>
</ol>
<h1 id="gettotalvotes">getTotalVotes()</h1>
<p>Returns an array of total BOT votes placed by all participants. Shows 10 values and each index is the total vote amount for that result.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>getTotalVotes(9a0e7d66)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint256[10]</code> is the array of total BOT votes shown in Botoshi</li>
</ul>
</li>
</ol>
<h1 id="resultindex">resultIndex()</h1>
<p>Returns the result index. If it returns 255, then no single result have reached the consensus threshold.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>resultIndex(0d4e8aed)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>uint8</code> is the result index</li>
</ul>
</li>
</ol>
<h1 id="finished">finished()</h1>
<p>Returns true or false if the Oracle is finished. No more transactions are allowed after finished.</p>
<ol>
<li><a href="../../qtum/qt_wallet/#launch-qt-wallet">Launch QT Wallet</a></li>
<li>Click on <code>Smart Contract</code> tab, then click on <code>Call</code> sub tab</li>
<li>Set the <code>Contract Address</code> and <a href="#interface-abi">Interface (ABI)</a></li>
<li>Set the <code>Function</code> to <code>finished(bef4876b)</code></li>
<li>Click <code>Call Contract</code> button</li>
<li>Returns:<ul>
<li><code>bool</code> shows true/false if the Oracle is finished</li>
</ul>
</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../logs/" class="btn btn-neutral float-right" title="Logs">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../centralized_oracle/" class="btn btn-neutral" title="CentralizedOracle"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../centralized_oracle/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../logs/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.10/clipboard.min.js"></script>
      <script src="../../js/clipboard.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
